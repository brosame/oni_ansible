short_hostname: jun

wan_interface: eth1

olsr_main_ip: 192.168.10.14

olsr_interfaces:
  - { name: "eth0" }

olsr_hna_announcements_ipv4:
  # Erreichbarkeit der oeffentlichen IP im olsr-Mesh
  - 139.30.241.201

# die web-API auf yurika benoetigt Zugang zu einer aktuellen ondataservice-Datenbank
olsr_extra_settings: |
  LoadPlugin "olsrd_ondataservice.so.0.1"
  {
      PlParam "interval" "120"
      PlParam "receive" "true"
      PlParam "database" "/var/run/olsrd/ondataservice.db"
      PlParam "dbcreatescript" "/usr/sbin/ondataservice-create-database"
  }

# Auswertung von ondataservice-Daten
munin_plugins:
  - ondataservice_firmware_versions

olsr_nameservice_announcements:
 # provide "http://api.on/" for firmware up to version 0.5.4 (traceroute and map visualization)
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.on"
 # FIXME: move api and map services to other server, non-standard ports and switch to "on_tld_base" (see below)
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.opennet-initiative.de"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.on-i.de"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.rostock.freifunk.net"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.schwerin.freifunk.net"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http api.wismar.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https api.opennet-initiative.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https api.on-i.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https api.rostock.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https api.schwerin.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https api.wismar.freifunk.net"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http map.opennet-initiative.de"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http map.on-i.de"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http map.rostock.freifunk.net"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http map.schwerin.freifunk.net"
 - "http://{{ olsr_main_ip }}:81|tcp|public-domain-http map.wismar.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https map.opennet-initiative.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https map.on-i.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https map.rostock.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https map.schwerin.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https map.wismar.freifunk.net"
 # die http-Umleitung für domain-proxy.on-i.de ist nicht notwendig, da apache2 diese direkt ausliefert
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https domain-proxy.opennet-initiative.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https domain-proxy.on-i.de"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https domain-proxy.rostock.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https domain-proxy.schwerin.freifunk.net"
 - "https://{{ olsr_main_ip }}:444|tcp|public-domain-https domain-proxy.wismar.freifunk.net"
#  - { on_tld_base: api }
#  - { on_tld_base: map }

apache2_sites:
  - { name: domain-proxy }
# slt läuft auf Port 443 - somit müssen unsere eigenen Dienste auf Port 444 laufen
apache2_port_https: 444

letsencrypt_certificates:
  - { on_tld_base: api }
  - { on_tld_base: map }
  - { on_tld_base: domain-proxy }
